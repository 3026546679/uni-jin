{"version":3,"sources":["webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?b738","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?a2b3","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?ad98","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?9ec9","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?9997","webpack:///F:/gs/uni-jin/components/jin-attachment/jin-attachment.vue?3a27"],"names":["props","attachmentList","type","Array","mode","String","uploadFileUrl","dafault","showProcess","Boolean","default","header","Object","limit","Number","fileKeyName","canUploadFile","computed","list","data","methods","previewImg","url","uni","previewImage","current","urls","downLoad","showModal","title","content","success","res","confirm","showLoading","console","log","downloadFile","tempFile","tempFilePath","saveFile","savedFilePath","hideLoading","showToast","openDocument","filePath","fail","icon","setTimeout","deleteItem","index","process","uploadTask","abort","splice","$forceUpdate","chooseFile","isNaN","length","chooseImage","count","sizeType","sourceType","temps","tempFiles","tempFilePaths","i","path","fileName","split","push","isImg","uploadFile","name","headers","uploadFileRes","result","JSON","parse","code","$set","$emit","onProgressUpdate","progress","lastIndexOf","ext","substr","temp","indexOf","toLowerCase"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyG;AACvC;AACL;AACsC;;;AAGnG;AAC6H;AAC7H,gBAAgB,wIAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAgtB,CAAgB,+sBAAG,EAAC,C;;;;;;;;;;;;s8BCApuB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACdA,OAAK,EAAE;AACNC,kBAAc,EAAE;AACfC,UAAI,EAAEC,KADS,CACH;AADG,KADV;AAINC,QAAI,EAAE;AACLF,UAAI,EAAEG,MADD,CACQ;AADR,KAJA;AAONC,iBAAa,EAAE;AACdJ,UAAI,EAAEG,MADQ;AAEdE,aAAO,EAAE,GAFK,CAED;AAFC,KAPT;AAWNC,eAAW,EAAE;AACZN,UAAI,EAAEO,OADM;AAEZC,aAAO,EAAE,IAFG,CAEE;AAFF,KAXP;AAeNC,UAAM,EAAE;AACPT,UAAI,EAAEU,MADC,CACM;AADN,KAfF;AAkBNC,SAAK,EAAE;AACNX,UAAI,EAAEY,MADA,EACQ;AACdJ,aAAO,EAAE,IAFH,EAlBD;;AAsBNK,eAAW,EAAE;AACZb,UAAI,EAAEG,MADM;AAEZK,aAAO,EAAE,MAFG,CAEI;AAFJ,KAtBP;AA0BNM,iBAAa,EAAE;AACdd,UAAI,EAAEO,OADQ;AAEdC,aAAO,EAAE,KAFK,EA1BT,EADO;;;AAgCdO,UAAQ,EAAE;AACTC,QADS,kBACF;AACN,aAAO,KAAKjB,cAAZ;AACA,KAHQ,EAhCI;;AAqCdkB,MArCc,kBAqCP;AACN,WAAO,EAAP;AACA,GAvCa;AAwCdC,SAAO,EAAE;AACRC,cADQ,sBACGC,GADH,EACQ;AACfC,SAAG,CAACC,YAAJ,CAAiB;AAChBC,eAAO,EAAE,CADO;AAEhBC,YAAI,EAAE,CAACJ,GAAD,CAFU,EAAjB;;AAIA,KANO;AAORK,YAPQ,oBAOCL,GAPD,EAOM;AACbC,SAAG,CAACK,SAAJ,CAAc;AACbC,aAAK,EAAE,WADM;AAEbC,eAAO,EAAE,GAFI;AAGbC,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,cAAIA,GAAG,CAACC,OAAR,EAAiB;AAChBV,eAAG,CAACW,WAAJ,CAAgB;AACfL,mBAAK,EAAE,SADQ,EAAhB;;AAGAM,mBAAO,CAACC,GAAR,CAAYd,GAAZ;AACAC,eAAG,CAACc,YAAJ,CAAiB;AAChBf,iBAAG,EAAEA,GADW;AAEhBS,qBAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,oBAAIM,QAAQ,GAAGN,GAAG,CAACO,YAAnB;AACAhB,mBAAG,CAACiB,QAAJ,CAAa;AACZD,8BAAY,EAAEP,GAAG,CAACO,YADN;AAEZR,yBAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,wBAAIS,aAAa,GAAGT,GAAG,CAACS,aAAxB;AACAlB,uBAAG,CAACmB,WAAJ;AACAnB,uBAAG,CAACoB,SAAJ,CAAc;AACbd,2BAAK,EAAE,aAAaY,aADP,EAAd;;AAGAlB,uBAAG,CAACqB,YAAJ,CAAiB;AAChBC,8BAAQ,EAAEJ,aADM;AAEhBV,6BAAO,EAAE,iBAASC,GAAT,EAAc;AACtBG,+BAAO,CAACC,GAAR,CAAYJ,GAAZ;AACA,uBAJe,EAAjB;;AAMA,mBAdW,EAAb;;AAgBA,eApBe;AAqBhBc,kBAAI,EAAE,cAAAd,GAAG,EAAI;AACZG,uBAAO,CAACC,GAAR,CAAYJ,GAAZ;AACAT,mBAAG,CAACmB,WAAJ;AACAnB,mBAAG,CAACoB,SAAJ,CAAc;AACbd,uBAAK,EAAE,MADM;AAEbkB,sBAAI,EAAE,MAFO,EAAd;;AAIA,eA5Be,EAAjB;;;AA+BAC,sBAAU,CAAC,YAAW;AACrBzB,iBAAG,CAACmB,WAAJ;AACA,aAFS,EAEP,KAFO,CAAV;;AAIA;AACA;AACA;AACA;AACD,SAhDY,EAAd;;AAkDA,KA1DO;AA2DRO,cA3DQ,sBA2DGC,KA3DH,EA2DU;AACjB3B,SAAG,CAACK,SAAJ,CAAc;AACbC,aAAK,EAAE,IADM;AAEbC,eAAO,EAAE,WAFI;AAGbC,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,cAAIA,GAAG,CAACC,OAAR,EAAiB;AAChB,gBAAI,KAAI,CAACf,IAAL,CAAUgC,KAAV,EAAiBC,OAAjB,IAA4B,GAAhC,EAAqC;AACpC,qBAAO,KAAI,CAACjC,IAAL,CAAUgC,KAAV,EAAiBE,UAAxB,IAAsC,WAAtC,IAAqD,KAAI,CAAClC,IAAL,CAAUgC,KAAV,EAAiBE,UAAjB,CAA4BC,KAA5B,EAArD;AACA;AACD,iBAAI,CAACnC,IAAL,CAAUoC,MAAV,CAAiBJ,KAAjB,EAAwB,CAAxB;AACA,iBAAI,CAACK,YAAL;AACA;AACD,SAXY,EAAd;;AAaA,KAzEO;AA0EFC,cA1EE;AA2EH,qBAAK3C,KAAL,IAAc,IAAd,IAAsB,CAAC4C,KAAK,CAAC,KAAK5C,KAAN,CA3EzB;AA4EF,qBAAKK,IAAL,CAAUwC,MAAV,IAAoB,KAAK7C,KA5EvB;AA6ELU,mBAAG,CAACoB,SAAJ,CAAc;AACbd,uBAAK,EAAE,WADM;AAEbkB,sBAAI,EAAE,MAFO,EAAd,EA7EK;;;;;AAoFP;;AAEA,qBAAK/B,aAAL,GAAqB,KAArB,CAtFO;;;;;;;;;;;;;;;;;AAuGH,qBAAKA,aAvGF;AAwGYO,qBAAG,CAACoC,WAAJ,CAAgB;AACjCC,yBAAK,EAAE,KAAK/C,KAAL,IAAc,IAAd,IAAsB,KAAKA,KAAL,GAAa,KAAKK,IAAL,CAAUwC,MAAvB,GAAgC,CAAtD,GAA0D,CAA1D,GAA8D,IAAI7C,KADxC;AAEjCgD,4BAAQ,EAAE,CAAC,UAAD,EAAa,YAAb,CAFuB,EAEK;AACtCC,8BAAU,EAAE,CAAC,OAAD,CAHqB,CAGX;AAHW,mBAAhB,CAxGZ,SAwGFC,KAxGE;;AA8GF,uBAAOA,KAAK,CAAC,CAAD,CAAZ,IAAmB,WA9GjB;;;AAiHFC,yBAjHE,GAiHUD,KAAK,CAAC,CAAD,CAAL,CAASE,aAjHnB;;;AAoHEC,iBApHF;AAqHFC,8BArHE,GAqHKH,SAAS,CAACE,CAAD,CArHd;AAsHFE,kCAAQ,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAtHT;AAuHND,kCAAQ,GAAGA,QAAQ,CAACA,QAAQ,CAACV,MAAT,GAAkB,CAAnB,CAAnB;AACIR,+BAxHE,GAwHM,MAAI,CAAChC,IAAL,CAAUwC,MAxHhB;;AA0HN;AACA,gCAAI,CAACxC,IAAL,CAAUoD,IAAV,CAAe;AACdF,oCAAQ,EAAEA,QADI;AAEd9C,+BAAG,EAAE6C,IAFS;AAGdjE,gCAAI,EAAE,MAAI,CAACqE,KAAL,CAAWJ,IAAX,IAAmB,OAAnB,GAA6B,MAHrB;AAIdjB,iCAAK,EAAEA,KAJO;AAKdE,sCAAU,EAAEA,UALE;AAMdD,mCAAO,EAAE,CANK,EAAf;;AAQA,gCAAI,CAACI,YAAL,GAnIM;;AAqIiBhC,+BAAG,CAACiD,UAAJ,CAAe;AACrClD,iCAAG,EAAE,MAAI,CAAChB,aAD2B;AAErCuC,sCAAQ,EAAEsB,IAF2B;AAGrCM,kCAAI,EAAE,MAAI,CAAC1D,WAH0B;AAIrC2D,qCAAO,EAAE,MAAI,CAAC/D,MAJuB;AAKrCoB,qCAAO,EAAE,iBAAA4C,aAAa,EAAI;AACzB,oCAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,aAAa,CAACxD,IAAzB,CAAb;AACA,oCAAIyD,MAAM,CAACG,IAAP,IAAe,GAAnB,EAAwB;AACvB,wCAAI,CAACC,IAAL,CAAU,MAAI,CAAC9D,IAAL,CAAUgC,KAAV,CAAV,EAA4B,SAA5B,EAAuC,GAAvC;AACA,wCAAI,CAAC+B,KAAL,CAAW,uBAAX,EAAoC,MAAI,CAAC/D,IAAzC;AACA,wCAAI,CAACqC,YAAL;AACA,iCAJD,MAIO;AACNhC,qCAAG,CAACoB,SAAJ,CAAc;AACbd,yCAAK,EAAE,MADM;AAEbkB,wCAAI,EAAE,MAFO,EAAd;;AAIA;AACD,+BAjBoC,EAAf,CArIjB,SAqIFK,UArIE;;;AAyJNA,oCAAU,CAAC8B,gBAAX,CAA4B,UAAAlD,GAAG,EAAI;AAClC;AACA,gCAAIA,GAAG,CAACmD,QAAJ,GAAe,EAAnB,EAAuB;AACtB,oCAAI,CAACH,IAAL,CAAU,MAAI,CAAC9D,IAAL,CAAUgC,KAAV,CAAV,EAA4B,SAA5B,EAAuClB,GAAG,CAACmD,QAA3C;AACA,oCAAI,CAAC5B,YAAL;AACA;AACD,2BAND,EAzJM,wGAoHOS,SApHP,gFAoHEE,CApHF,2DAoHEA,CApHF;;;AAkKR;AACAK,SAnKQ,iBAmKF1B,QAnKE,EAmKQ;AACf,UAAIK,KAAK,GAAGL,QAAQ,CAACuC,WAAT,CAAqB,GAArB,CAAZ;AACA,UAAIC,GAAG,GAAGxC,QAAQ,CAACyC,MAAT,CAAgBpC,KAAK,GAAG,CAAxB,CAAV;AACA,UAAIqC,IAAI,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,MAAf,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,MAArC,EAA6C,KAA7C,EAAoD,MAApD,EAA4DC,OAA5D,CAAoEH,GAAG,CAACI,WAAJ,EAApE,MAA2F,CAAC,CAAvG;AACA,aAAOF,IAAP;AACA,KAxKO,EAxCK,E;;;;;;;;;;;;;AClCf;AAAA;AAAA;AAAA;AAA0sC,CAAgB,+oCAAG,EAAC,C;;;;;;;;;;;ACA9tC,uC","file":"components/jin-attachment/jin-attachment.js","sourcesContent":["import { render, staticRenderFns } from \"./jin-attachment.vue?vue&type=template&id=73428cf8&scoped=true&\"\nimport script from \"./jin-attachment.vue?vue&type=script&lang=js&\"\nexport * from \"./jin-attachment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./jin-attachment.vue?vue&type=style&index=0&id=73428cf8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73428cf8\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('73428cf8', component.options)\n    } else {\n      api.reload('73428cf8', component.options)\n    }\n    module.hot.accept(\"./jin-attachment.vue?vue&type=template&id=73428cf8&scoped=true&\", function () {\n      api.rerender('73428cf8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"gs/uni-jin/components/jin-attachment/jin-attachment.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jin-attachment.vue?vue&type=template&id=73428cf8&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jin-attachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jin-attachment.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tattachmentList: {\r\n\t\t\ttype: Array //附件列表\r\n\t\t},\r\n\t\tmode: {\r\n\t\t\ttype: String //模式： create => 可新增或编辑附件 不填或其他 => 只能查看附件\r\n\t\t},\r\n\t\tuploadFileUrl: {\r\n\t\t\ttype: String,\r\n\t\t\tdafault: '#' // 上传文件的服务器url\r\n\t\t},\r\n\t\tshowProcess: {\r\n\t\t\ttype: Boolean, \r\n\t\t\tdefault: true //是否显示进度，默认显示\r\n\t\t},\r\n\t\theader: {\r\n\t\t\ttype: Object //上传图片到服务器时，HTTP 请求 Header\r\n\t\t},\r\n\t\tlimit: {\r\n\t\t\ttype: Number, //限制可上传的图片数量\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tfileKeyName: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'file' //用于在服务端通过自定义key值获取该文件数据\r\n\t\t},\r\n\t\tcanUploadFile: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tlist() {\r\n\t\t\treturn this.attachmentList;\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {};\r\n\t},\r\n\tmethods: {\r\n\t\tpreviewImg(url) {\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\turls: [url]\r\n\t\t\t});\r\n\t\t},\r\n\t\tdownLoad(url) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '确定要下载此附件吗',\r\n\t\t\t\tcontent: ' ',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '下载中,请稍后'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(url);\r\n\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tvar tempFile = res.tempFilePath;\r\n\t\t\t\t\t\t\t\tuni.saveFile({\r\n\t\t\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tvar savedFilePath = res.savedFilePath;\r\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '保存成功，路径为' + savedFilePath\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tuni.openDocument({\r\n\t\t\t\t\t\t\t\t\t\t\tfilePath: savedFilePath,\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '下载失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}, 20000);\r\n\r\n\t\t\t\t\t\t// downloadTask.onProgressUpdate((res) => {\r\n\t\t\t\t\t\t//     console.log('下载中,进度' +  res.progress)\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tdeleteItem(index) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '确定要删除此项吗？',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tif (this.list[index].process != 100) {\r\n\t\t\t\t\t\t\ttypeof this.list[index].uploadTask != 'undefined' && this.list[index].uploadTask.abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.list.splice(index, 1);\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync chooseFile() {\r\n\t\t\tif (this.limit != null && !isNaN(this.limit)) {\r\n\t\t\t\tif (this.list.length >= this.limit) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已达到最大上传数量',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 非APP平台不可以上传文件\r\n\r\n\t\t\tthis.canUploadFile = false;\r\n\r\n\t\t\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\tif(!this.canUploadFile) {\r\n\t\t\t\tvar temps = await uni.chooseImage({\r\n\t\t\t\t\tcount: this.limit == null || this.limit - this.list.length > 9 ? 9 : 9 - limit,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album'] //从相册选择\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t\tif (typeof temps[1] == 'undefined') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar tempFiles = temps[1].tempFilePaths;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i in tempFiles) {\r\n\t\t\t\tlet path = tempFiles[i];\r\n\t\t\t\tvar fileName = path.split('/');\r\n\t\t\t\tfileName = fileName[fileName.length - 1];\r\n\t\t\t\tlet index = this.list.length;\r\n\r\n\t\t\t\t// 开始上传，先暂存文件\r\n\t\t\t\tthis.list.push({\r\n\t\t\t\t\tfileName: fileName,\r\n\t\t\t\t\turl: path,\r\n\t\t\t\t\ttype: this.isImg(path) ? 'image' : 'file',\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tuploadTask: uploadTask,\r\n\t\t\t\t\tprocess: 0\r\n\t\t\t\t});\r\n\t\t\t\tthis.$forceUpdate();\r\n\r\n\t\t\t\tvar uploadTask = await uni.uploadFile({\r\n\t\t\t\t\turl: this.uploadFileUrl,\r\n\t\t\t\t\tfilePath: path,\r\n\t\t\t\t\tname: this.fileKeyName,\r\n\t\t\t\t\theaders: this.header,\r\n\t\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\t\tvar result = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\tif (result.code == 200) {\r\n\t\t\t\t\t\t\tthis.$set(this.list[index], 'process', 100);\r\n\t\t\t\t\t\t\tthis.$emit('update:attachmentList', this.list);\r\n\t\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tuploadTask.onProgressUpdate(res => {\r\n\t\t\t\t\t//此接口不显示真实进度， 所以需要特殊处理\r\n\t\t\t\t\tif (res.progress < 90) {\r\n\t\t\t\t\t\tthis.$set(this.list[index], 'process', res.progress);\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//根据文件名，返回时是否是图片类型\r\n\t\tisImg(filePath) {\r\n\t\t\tlet index = filePath.lastIndexOf('.');\r\n\t\t\tlet ext = filePath.substr(index + 1);\r\n\t\t\tvar temp = ['png', 'jpg', 'jpeg', 'bmp', 'gif', 'webp', 'svg', 'tiff'].indexOf(ext.toLowerCase()) !== -1;\r\n\t\t\treturn temp;\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jin-attachment.vue?vue&type=style&index=0&id=73428cf8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./jin-attachment.vue?vue&type=style&index=0&id=73428cf8&lang=less&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}